<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:bnu="http://bootsfaces.net/ui"
      xmlns:p="http://primefaces.org/ui">

    <h:body>
        <ui:composition template="../../../template/template.xhtml">

            <ui:define name="content">
                <h:form id="CustomerDetailForm" >
                    <bnu:row>
                        <bnu:column span="12">
                            <bnu:navLink href="#{request.contextPath}/view/sales/sales.xhtml" value="#{messages.lblGoBackCust}" />
                        </bnu:column>
                    </bnu:row>
                    <bnu:row>
                        <bnu:column span="4" >
                            <h3> #{customerDetailController.currentCust.displayName}</h3>
                            <p  style="color: grey;" >#{customerDetailController.currentCust.company} | #{customerDetailController.currentCust.city}, #{customerDetailController.currentCust.country}</p>
                        </bnu:column>
                        <bnu:column span="5" />
                        <bnu:column span="3" >
                            <h3> <bnu:button value="Edit" onclick="$('.editCustModal').modal();" />

                                <bnu:dropButton value="#{messages.lblNewTrans}" style="margin-left: 1em;" look="success"  >
                                    <bnu:commandButton value="#{messages.lblInvoiceTypeIn}"  action="#{customerDetailController.setType('IN' )}" style="width: 100%; border: none" />
                                    <bnu:commandButton value="#{messages.lblPayment}"   style="width: 100%; border: none" action="#{customerDetailController.pagar()}" />
                                    <bnu:commandButton value="#{messages.lblEstimate}"  action="#{customerDetailController.setType('ES')}" style="width: 100%; border: none" />
                                    <bnu:commandButton value="#{messages.salesR}"  action="#{customerDetailController.setType('SR')}" style="width: 100%; border: none" />
                                    <bnu:commandButton value="#{messages.lblStatement}"  action="#{customerDetailController.statement()}" style="width: 100%; border: none" />
                                </bnu:dropButton> </h3>

                        </bnu:column>
                    </bnu:row>
                    <bnu:row>
                        <bnu:column span="10" />
                        <bnu:column span="2" >
                            <table>
                                <tr>
                                    <td style="background-color: yellow;width: 0.50em" rowspan="2" >

                                    </td>
                                    <td style="padding-left:  0.50em" >
                                        <h4>#{userData.formatMaster(customerDetailController.DOpenBalance)}</h4> 
                                    </td>

                                </tr>
                                <tr>
                                    <td style="padding-left: 0.50em" >
                                        <p style="color: grey;" >OPEN</p>
                                    </td>
                                </tr>

                            </table>
                            <br/>
                            <table>
                                <tr>
                                    <td style="background-color: red;width: 0.50em" rowspan="2"  >

                                    </td>
                                    <td style="padding-left: 0.50em" >
                                        <h4>#{userData.formatMaster(customerDetailController.DOverDue)}</h4>
                                    </td>

                                </tr>
                                <tr>
                                    <td style="padding-left: 0.50em" >
                                        <p style="color: grey;" >OVERDUE</p>
                                    </td>

                                </tr>
                            </table>





                        </bnu:column>


                    </bnu:row>
                    <bnu:row>
                        <bnu:column span="12">
                            <bnu:messages id="messages" />
                        </bnu:column>
                    </bnu:row>

                    <bnu:tabView active-index="0" > 
                        <bnu:tab title="#{messages.lblTransactionList}">

                            <div class="dropdown">
                                <bnu:button onclick="myFunction()" value="#{messages.lblFilter}" style="margin-bottom: 15px"  class="dropLi" iconAwesome="fa-angle-down" icon-align="right" />
                                <div id="myDropdown" class="dropdown-content dropLi">
                                    <bnu:selectOneMenu label="#{messages.lblType}" style="width: 150px;"   class="comboType" >
                                        <f:selectItem itemValue="0" itemLabel="#{messages.lblAllTransactions}"  />
                                        <f:selectItem itemValue="AI" itemLabel="#{messages.lblAllInvoices}"  />
                                        <f:selectItem itemValue="OP" itemLabel="#{messages.lblOpenInvoices}"  />
                                        <f:selectItem itemValue="OV" itemLabel="#{messages.lblOverdueInvoices}"  />
                                        <f:selectItem itemValue="ES" itemLabel="#{messages.lblEstimates}"  />
                                        <f:selectItem itemValue="PD" itemLabel="#{messages.lblPaidInvoices}"  />
                                        <f:selectItem itemValue="PA" itemLabel="#{messages.lblFilterCustPayments}"  />
                                        <f:selectItem itemValue="SR" itemLabel="#{messages.lblFilterCustSalesReceipts}"  />
                                        <f:selectItem itemValue="ST" itemLabel="#{messages.lblFilterCustStatements}"  />
                                    </bnu:selectOneMenu>
                                    <br/>
                                    <bnu:selectOneMenu label="#{messages.lblInvoiceDate}" style="width: 150px;"  class="filterDate"
                                                       onchange="filterHelper.changeDate(this.value);"               >
                                        <f:selectItem itemLabel="#{messages.lblAllDates}" itemValue="AD" />
                                        <f:selectItem itemLabel="#{messages.lblToday}" itemValue="TO" />
                                        <f:selectItem itemLabel="#{messages.lblYesterday}" itemValue="YE" />
                                        <f:selectItem itemLabel="#{messages.lblThisWeek}" itemValue="TW" />
                                        <f:selectItem itemLabel="#{messages.lblThisMonth}" itemValue="TM" />
                                        <f:selectItem itemLabel="#{messages.lblThisQuarter}" itemValue="TQ" />
                                        <f:selectItem itemLabel="#{messages.lblThisYear}" itemValue="TY" />
                                        <f:selectItem itemLabel="#{messages.lblLastWeek}" itemValue="LW" />
                                        <f:selectItem itemLabel="#{messages.lblLastMonth}" itemValue="LM" />
                                        <f:selectItem itemLabel="#{messages.lblLastQuarter}" itemValue="LQ" />
                                        <f:selectItem itemLabel="#{messages.lblLastYear}" itemValue="LY" />
                                        <f:selectItem itemLabel="#{messages.lblLast365Days}" itemValue="L3" />
                                    </bnu:selectOneMenu>
                                    <bnu:inputText class="ffrom" type="hidden" />
                                    <bnu:inputText class="fto"  type="hidden" />
                                    <br/>
                                    <bnu:commandButton look="success" value="Apply"/>
                                    <bnu:commandButton look="danger" value="Reset" style="margin-left: 5px;" />
                                </div>
                            </div>

                            <bnu:dataTable
                                value="#{customerDetailController.transactionList}"
                                id="tblInvoice"
                                var="in"
                                responsive="true"
                                rendered="#{customerDetailController.transactionList.size() > 0}"

                                >
                                <bnu:dataTableColumn  >
                                    <f:facet name="header">
                                        <bnu:selectBooleanCheckbox  />
                                    </f:facet>
                                    <bnu:selectBooleanCheckbox  value="#{in.checkbox}"  />
                                </bnu:dataTableColumn>
                                <bnu:dataTableColumn label="#{messages.lblInvoiceDate}" value="#{in.inDate}"   />
                                <bnu:dataTableColumn  label="#{messages.lblType}" value="#{userData.formatType(in.type)}" ></bnu:dataTableColumn>
                                <bnu:dataTableColumn   label="#{messages.lblInvoiceNo}"  value="#{in.noDot}" ></bnu:dataTableColumn>

                                <bnu:dataTableColumn label="#{messages.lblIncoiceDueDate}" value="#{in.dueDate}" ></bnu:dataTableColumn>
                                <bnu:dataTableColumn label="#{messages.lblInvoiceBalance}" value="#{userData.formatMaster(in.actualBalance.toString())}" ></bnu:dataTableColumn>
                                <bnu:dataTableColumn label="#{messages.lblInvoiceTotalBTax}" value="#{userData.formatMaster(in.subTotal.toString())}" ></bnu:dataTableColumn>
                                <bnu:dataTableColumn label="#{messages.lblInvoiceTax}" value="#{userData.formatMaster(in.taxTotal.toString())}"  ></bnu:dataTableColumn>
                                <bnu:dataTableColumn label="#{messages.lblInvoiceTotal}"  value="#{userData.formatMaster(in.total.toString())}" ></bnu:dataTableColumn>
                                <bnu:dataTableColumn label="#{messages.lblInvoiceStatus}" value="#{userData.formatStatus(in.status)}" ></bnu:dataTableColumn>
                                <bnu:dataTableColumn label="#{messages.lblAction}">

                                    <bnu:dropButton value="#{messages.edit}" look="primary" styleClass="hidden-xs hidden-sm" >
                                        <bnu:commandButton value="#{messages.edit}"  style="width:100%; border: none" action="#{customerDetailController.edit(in)}" rendered="#{userData.showOptions(in.status,in.type,'EDIT')}"  />

                                        <bnu:commandButton value="#{messages.lblInvoicePrint}"  style="width:100%; border: none"  update="pdf" action="#{customerDetailController.print(in,request)}"
                                                           rendered="#{userData.showOptions(in.status,in.type,'PRINT')}"  />

                                        <bnu:commandButton value="Update status"  style="width:100%; border: none"  
                                                           rendered="#{userData.showOptions(in.status,in.type,'ESTATUS')}" action="#{customerDetailController.assignEstimate(in)}"   />

                                        <bnu:commandButton value="Copy"  style="width:100%; border: none"  
                                                           rendered="#{userData.showOptions(in.status,in.type,'COPY')}" action="#{customerDetailController.copy(in)}"   />

                                        <bnu:commandButton value="Receive Payment"  style="width:100%; border: none"  
                                                           rendered="#{userData.showOptions(in.status,in.type,'REPAY')}" action="#{customerDetailController.recievePayment(in.idCust.idCust.toString(), in.idInvoice.toString())}"   />

                                    </bnu:dropButton>
                                    <bnu:commandButton value="#{messages.edit}"  look="warning" styleClass="hidden-lg hidden-md" action="#{customerDetailController.edit(in)}" rendered="#{userData.showOptions(in.status,in.type,'EDIT')}"   />

                                    <bnu:commandButton value="Update status"  style="width:100%; border: none"   styleClass="hidden-lg hidden-md"
                                                       rendered="#{userData.showOptions(in.status,in.type,'ESTATUS')}" action="#{customerDetailController.assignEstimate(in)}"   />

                                    <bnu:commandButton value="#{messages.lblInvoicePrint}" update="pdf"  styleClass="hidden-lg hidden-md"  action="#{customerDetailController.print(in,request)}" rendered="#{userData.showOptions(in.status,in.type,'PRINT')}"  />

                                    <bnu:commandButton value="Copy"  style="width:100%; border: none" styleClass="hidden-lg hidden-md" 
                                                       rendered="#{userData.showOptions(in.status,in.type,'COPY')}" action="#{customerDetailController.copy(in)}"   />
                                    <bnu:commandButton value="Receive Payment"  style="width:100%; border: none"  styleClass="hidden-lg hidden-md"
                                                       rendered="#{userData.showOptions(in.status,in.type,'REPAY')}" action="#{customerDetailController.recievePayment(in.idCust.idCust.toString(), in.idInvoice.toString())}"   />
                                </bnu:dataTableColumn>

                            </bnu:dataTable>
                            
                            
                            
                            <bnu:dataTable 
                                rendered="#{customerDetailController.stmtList.size() > 0}"
                    value="#{customerDetailControllerstmtList}"
                    var="stmt">
                    <bnu:dataTableColumn  >
                                    <f:facet name="header">
                                        <bnu:selectBooleanCheckbox  />
                                    </f:facet>
                                    <bnu:selectBooleanCheckbox  value="#{stmt.checkbox}"  />
                                </bnu:dataTableColumn>
                    <bnu:dataTableColumn   label="#{messages.lblStmtDate}"  value="#{stmt.stmtDate}" ></bnu:dataTableColumn>
                    <bnu:dataTableColumn   label="#{messages.lblInvoiceNo}"  value="#{stmt.noDot}" ></bnu:dataTableColumn>
                    <bnu:dataTableColumn label="#{messages.lblInvocieCustomer }" value="#{stmt.idCust.displayName}" ></bnu:dataTableColumn>
                    <bnu:dataTableColumn label="#{messages.lblStmtStartDate}" value="#{stmt.startDate}"  />
                    <bnu:dataTableColumn label="#{messages.lblStmtEndDate}" value="#{stmt.endDate}"  />
                    <bnu:dataTableColumn label="#{messages.lblStmtType}" value="#{customerDetailController.formatStmtType(stmt.type)}"  />
                    <bnu:dataTableColumn label="#{messages.action}"   >
                    <bnu:dropButton value="#{messages.lblView}" look="primary" styleClass="hidden-xs hidden-sm" >
                        <bnu:commandButton value="#{messages.lblView}"  style="width:100%; border: none" action="#{customerDetailController.viewStmt(stmt.idCust.idCust, stmt.idStmt)}"  />

                            <bnu:commandButton value="#{messages.lblInvoicePrint}"  style="width:100%; border: none"  update="@(.pdfStatement)" oncomplete="$('.printeModal').modal('show')" 
                                               action="#{customerDetailController.generateStmt(stmt)}"             />

                           
                        </bnu:dropButton>
                    </bnu:dataTableColumn>
                </bnu:dataTable>
                            
                            
                            <bnu:row>
                                <bnu:column span="1">
                                    <label>#{messages.lblBalanceTotal}</label>
                                </bnu:column>
                                <bnu:column span="2">
                                    <h:outputText value="#{userData.formatMaster(customerDetailController.totalBalance.toString())}" />
                                </bnu:column>
                                <bnu:column span="1">
                                    <label>#{messages.lblTotalTotal}</label>
                                </bnu:column>
                                <bnu:column span="2">
                                    <h:outputText value="#{userData.formatMaster(customerDetailController.totalTotal.toString())}" />
                                </bnu:column>
                            </bnu:row>


                        </bnu:tab>
                        <bnu:tab title="#{messages.lblCustomerDetails}">



                            <!-- cust data -->
                            <br/>
                            <br/>
                            <bnu:column col-lg="6" col-md="6" col-sm="12" col-xs="12" >
                                <table class="table table-hover">

                                    <tbody>
                                        <tr>
                                            <td><strong>#{messages.lblCustomerFU}</strong></td>
                                            <td>#{customerDetailController.currentCust.displayName}</td>

                                        </tr>
                                        <tr>
                                            <td><strong>#{messages.lblEmailCustomerFU}</strong></td>
                                            <td>#{customerDetailController.currentCust.email}</td>

                                        </tr>
                                        <tr>
                                            <td><strong>#{messages.phoneC}</strong></td>
                                            <td>#{customerDetailController.currentCust.phone}</td>

                                        </tr>
                                        <tr>
                                            <td><strong>#{messages.mobileC}</strong></td>
                                            <td>#{customerDetailController.currentCust.mobile}</td>

                                        </tr>
                                        <tr>
                                            <td><strong>#{messages.faxC}</strong></td>
                                            <td>#{customerDetailController.currentCust.fax}</td>

                                        </tr>
                                        <tr>
                                            <td><strong>#{messages.websiteC}</strong></td>
                                            <td>#{customerDetailController.currentCust.webside}</td>

                                        </tr>
                                        <tr>
                                            <td><strong>#{messages.lblCustNotes}</strong></td>
                                            <td><input type="text" placeholder="#{messages.lblAddNotes}" disabled="disabled" value="#{customerDetailController.currentCust.note}" /></td>

                                        </tr>
                                    </tbody>
                                </table>
                            </bnu:column>
                            <bnu:column col-lg="6" col-md="6" col-sm="12" col-xs="12" >
                                <table class="table table-hover">

                                    <tbody>
                                        <tr>
                                            <td><strong>#{messages.billingA}</strong></td>
                                            <td>#{customerDetailController.currentCust.city},#{customerDetailController.currentCust.country}</td>

                                        </tr>
                                        <tr>
                                            <td><strong>#{messages.shippingA}</strong></td>
                                            <td>#{customerDetailController.currentCust.cityS},#{customerDetailController.currentCust.countryS}</td>


                                        </tr>
                                        <tr>
                                            <td><strong>#{messages.lblInvoiceTerms}</strong></td>
                                            <td>#{customerDetailController.currentCust.terms}</td>


                                        </tr>
                                        <tr>
                                            <td><strong>#{messages.lblPaymentMethod}</strong></td>
                                            <td>#{customerDetailController.currentCust.paymentMethod}</td>


                                        </tr>
                                        <tr>
                                            <td><strong>#{messages.lblPrefDelivery}</strong></td>
                                            <td>#{customerDetailController.currentCust.deliveryMethod}</td>


                                        </tr>
                                        <tr>
                                            <td><strong>#{messages.lblTaxRegNo}</strong></td>
                                            <td>#{customerDetailController.currentCust.taxregno}</td>


                                        </tr>
                                    </tbody>
                                </table>
                            </bnu:column>



                        </bnu:tab>

                    </bnu:tabView>


                </h:form>


                <bnu:modal  id="invoiceModal" title="#{messages.invoice}" styleClass="invoiceModal"  close-on-escape="false" backdrop="false"  >
                    <h:panelGroup id="pdf">

                        <p:media value="#{customerDetailController.invoiceModal}" width="100%" height="500px" rendered="#{not(customerDetailController.invoiceModal eq '0')}"  />     


                    </h:panelGroup>
                </bnu:modal> 


                <bnu:modal  id="updateStatusModal" title="#{messages.lblEstimate}" styleClass="updateStatusModal"   >

                    <h:form  >
                        <bnu:selectOneMenu label="#{messages.lblInvoiceStatus}" value="#{customerDetailController.estimateStatus}" onchange="show(this.value);" >

                            <f:selectItem itemValue="PE" itemLabel="#{messages.lblESPending}" />
                            <f:selectItem itemValue="AC" itemLabel="#{messages.lblAccepted}" />
                            <f:selectItem itemValue="CL" itemLabel="#{messages.lblClosed}" />
                            <f:selectItem itemValue="RJ" itemLabel="#{messages.lblRejected}" />
                        </bnu:selectOneMenu>
                        <div class="updateEstimateStatus" style="display: none;" >
                            <bnu:inputText label="By" maxlength="30"  value="#{customerDetailController.accBy}" />
                            <strong>
                                <h:outputText value="Date"  />

                            </strong>
                            <bnu:datepicker value="#{customerDetailController.accDate}"    />
                        </div>
                        <p:separator/>

                        <bnu:commandButton value="Cancel" style="margin-right: 10px;" />
                        <bnu:commandButton value="Ok" look="success"  action="#{customerDetailController.updateEstimateStatus()}" />

                    </h:form>

                </bnu:modal>




                <h:form id="customerFormEdit" >
                    <bnu:modal id="amodal2" styleClass="editCustModal" size="modal-lg" title="Customer information" >
                        <bnu:row>
                            <bnu:column span="1" >
                                <label>#{messages.titleC}</label>
                                <bnu:inputText type="text" size="3" value="#{customerDetailController.currentCust.title}"  class="title" name="title" onblur="customerFormHelper.displayName();" maxlength="4"  />
                            </bnu:column>
                            <bnu:column span="2" >
                                <label>#{messages.fNameC}</label>
                                <bnu:inputText type="text" size="10" value="#{customerDetailController.currentCust.firstname}" class="fname" name="fname"  onblur="customerFormHelper.displayName();"  maxlength="10" />

                            </bnu:column>
                            <bnu:column span="2" >
                                <label>#{messages.midNameC}</label>
                                <bnu:inputText type="text" size="10" value="#{customerDetailController.currentCust.middlename}" class="mname" name="mname" onblur="customerFormHelper.displayName();"   maxlength="10" />

                            </bnu:column>
                            <bnu:column span="2" >
                                <label>#{messages.lastNameC}</label>
                                <bnu:inputText type="text" size="10" value="#{customerDetailController.currentCust.lastname}" class="lname" name="lname" onblur="customerFormHelper.displayName();"   maxlength="15" />

                            </bnu:column>
                            <bnu:column span="1" >
                                <label>#{messages.suffixC}</label>
                                <bnu:inputText type="text" size="3" value="#{customerDetailController.currentCust.suffixx}" class="suffix" name="suffix" onblur="customerFormHelper.displayName();"  maxlength="10"  />

                            </bnu:column>
                            <bnu:column span="4" >
                                <bnu:inputText label="#{messages.email}" value="#{customerDetailController.currentCust.email}" field-size="xs" maxlength="50" />

                            </bnu:column>
                        </bnu:row>

                        <bnu:row>

                            <bnu:column span="6" >
                                <bnu:inputText label="#{messages.companyC}" value="#{customerDetailController.currentCust.company}" field-size="xs"  maxlength="50" />
                            </bnu:column>
                            <bnu:column span="2" >
                                <bnu:inputText label="#{messages.phoneC}" value="#{customerDetailController.currentCust.phone}" field-size="xs" maxlength="10" />
                            </bnu:column>
                            <bnu:column span="2" >
                                <bnu:inputText label="#{messages.mobileC}" value="#{customerDetailController.currentCust.mobile}" field-size="xs" maxlength="10"  />
                            </bnu:column>
                            <bnu:column span="2" >
                                <bnu:inputText label="#{messages.faxC}" value="#{customerDetailController.currentCust.fax}" field-size="xs" maxlength="10" />

                            </bnu:column>
                        </bnu:row>

                        <bnu:row>


                            <bnu:column span="6" >
                                <label>#{messages.displayN}</label>
                                <bnu:inputText type="text" class="displayName"  field-size="xs" value="#{customerDetailController.currentCust.displayName}"  maxlength="60"/>
                            </bnu:column>
                            <bnu:column span="2" >
                                <bnu:inputText label="#{messages.Otros}" field-size="xs"   />
                            </bnu:column>
                            <bnu:column span="4" >
                                <bnu:inputText label="#{messages.website}" field-size="xs" value="#{customerDetailController.currentCust.webside}" maxlength="20" />

                            </bnu:column>
                        </bnu:row>


                        <bnu:tabView  activeIndex="0" >
                            <bnu:tab title="#{messages.lblAddress}" >
                                <bnu:row>
                                    <bnu:column span="6" >
                                        <bnu:row>
                                            <bnu:column span="12">
                                                <label>#{messages.billingA}</label>
                                                <bnu:inputTextarea  placeholder="#{messages.streetC}" class="form-control"  value="#{customerDetailController.currentCust.street}" maxlength="100" />
                                            </bnu:column>
                                        </bnu:row>

                                        <bnu:row>
                                            <bnu:column span="6">
                                                <bnu:inputText placeholder="#{messages.cityT}"  value="#{customerDetailController.currentCust.city}" maxlength="10" />
                                            </bnu:column>

                                            <bnu:column span="6">
                                                <bnu:inputText placeholder="#{messages.stateP}"  value="#{customerDetailController.currentCust.estate}" maxlength="10" />
                                            </bnu:column>

                                        </bnu:row>

                                        <bnu:row>
                                            <bnu:column span="6">
                                                <bnu:inputText placeholder="#{messages.postalCC}"  value="#{customerDetailController.currentCust.postalCode}" maxlength="10" />
                                            </bnu:column>

                                            <bnu:column span="6">
                                                <bnu:inputText placeholder="#{messages.countryC}" value="#{customerDetailController.currentCust.country}" maxlength="10" />
                                            </bnu:column>

                                        </bnu:row>

                                    </bnu:column>

                                    <bnu:column span="6" >
                                        <bnu:row>
                                            <bnu:column span="12">
                                                <label>#{messages.shippingA}</label> <input checked="true" type="checkbox" onclick="customerFormHelper.enableShipAdress()" value="1"  name="sameSha" id="sameSha" />#{messages.sameSHA}
                                                <bnu:inputTextarea placeholder="#{messages.streetC}"  class="form-control shippingEnable"  value="#{customerDetailController.currentCust.streetS}" maxlength="100"   />
                                            </bnu:column>
                                        </bnu:row>
                                        <bnu:row>

                                            <bnu:column span="6">
                                                <bnu:inputText placeholder="#{messages.cityT}"  class="shippingEnable" value="#{customerDetailController.currentCust.cityS}" maxlength="10"  />
                                            </bnu:column>

                                            <bnu:column span="6">
                                                <bnu:inputText placeholder="#{messages.stateP}"  class="shippingEnable" value="#{customerDetailController.currentCust.estateS}" maxlength="10" />
                                            </bnu:column>
                                        </bnu:row>
                                        <bnu:row>

                                            <bnu:column span="6">
                                                <bnu:inputText placeholder="#{messages.postalCC}"  class="shippingEnable" value="#{customerDetailController.currentCust.postalCodeS}" maxlength="10" />
                                            </bnu:column>

                                            <bnu:column span="6">
                                                <bnu:inputText placeholder="#{messages.countryC}"  class="shippingEnable" value="#{customerDetailController.currentCust.countryS}" maxlength="10" />
                                            </bnu:column>
                                        </bnu:row>
                                    </bnu:column>




                                </bnu:row>


                            </bnu:tab>
                            <bnu:tab title="#{messages.lblCustNotes }" >
                                <bnu:row>
                                    <bnu:column span="12">
                                        <bnu:inputTextarea label="#{messages.lblCustNotes }"  value="#{customerDetailController.currentCust.note}" maxlength="200" />
                                    </bnu:column>
                                </bnu:row>
                            </bnu:tab>
                            <bnu:tab title="#{messages.taxInfo}" >
                                <bnu:row>
                                    <bnu:column span="4">
                                        <bnu:inputText label="#{messages.lblTaxRegNo}"  value="#{customerDetailController.currentCust.taxregno}"  maxlength="15" />
                                    </bnu:column>
                                </bnu:row>
                            </bnu:tab>
                            <bnu:tab title="#{messages.lblPaymentAndBilling}" >
                                <bnu:row>
                                    <bnu:column span="4">
                                        <bnu:selectOneMenu label="#{messages.lblPreferredPayment}" value="#{customerDetailController.currentCust.paymentMethod}" >
                                            <f:selectItem  itemLabel="#{messages.selectOne}" itemValue=""  />
                                            <f:selectItems value="#{customerDetailController.PMethodList}" var="pm"
                                                           itemValue="#{pm.display}" itemLabel="#{pm.display}" />   
                                        </bnu:selectOneMenu>
                                    </bnu:column>
                                    <bnu:column span="4"></bnu:column>
                                    <bnu:column span="4">
                                        <bnu:selectOneMenu label="#{messages.lblInvoiceTerms}"    value="#{customerDetailController.currentCust.terms}" >
                                            <f:selectItem  itemLabel="#{messages.selectOne}" itemValue="0"  />
                                            <f:selectItems value="#{customerDetailController.TList}" var="term"
                                                           itemLabel="#{term.display}" itemValue="#{term.days}" />
                                        </bnu:selectOneMenu>
                                    </bnu:column>
                                </bnu:row>
                                <bnu:row>
                                    <bnu:column span="4">
                                        <bnu:selectOneMenu label="#{messages.lblPrefDelivery}" value="#{customerDetailController.currentCust.deliveryMethod}" >
                                            <f:selectItem  itemLabel="#{messages.lblNone}" itemValue="#{messages.lblNone}"  />
                                            <f:selectItem  itemLabel="#{messages.lblSendLater}" itemValue="#{messages.lblSendLater}"  />
                                            <f:selectItem  itemLabel="#{messages.lblPrintLater}" itemValue="#{messages.lblPrintLater}"  />
                                        </bnu:selectOneMenu>
                                    </bnu:column>
                                    <bnu:column span="2"></bnu:column>
                                    <bnu:column span="2">
                                        <bnu:inputText  label="#{messages.lblOpeningBalance}"  value="#{customerDetailController.currentCust.balance}" disabled="true" maxlength="6" />
                                    </bnu:column>
                                    <bnu:column span="4"> <label>#{messages.lblAsOf}</label><bnu:inputText type="date" disabled="true" value="#{customerDetailController.currentCust.asOf}" maxlength="10"  /></bnu:column>
                                </bnu:row>
                            </bnu:tab>
                            <bnu:tab title="#{messages.lblAttachments}" >
                                <bnu:row>
                                    <bnu:column  span="4">
                                        <p:fileUpload />
                                    </bnu:column>
                                    <bnu:column  span="4">
                                        #{messages.lblMaximumSize}
                                    </bnu:column>
                                </bnu:row>
                            </bnu:tab>


                        </bnu:tabView>
                        <bnu:row>
                            <bnu:column span="12">
                                <bnu:messages id="errorMessage"/>
                            </bnu:column>
                        </bnu:row>

                        <f:facet name="footer">
                            <bnu:button value="Close" dismiss="modal"  />
                            <bnu:commandButton value="#{messages.save}" look="success" update="customerFormEdit:errorMessage" action="#{customerDetailController.editCustomer()}" />
                        </f:facet>
                    </bnu:modal>
                </h:form>
                
                
                    <bnu:modal  id="stmtModal" title="#{messages.lblStatement}" size="modal-lg" styleClass="printeModal"  close-on-escape="false" backdrop="false" closable="false"   >
            <h:panelGroup id="pdfStmt" class="pdfStatement" >

                <p:media value="#{customerDetailController.stmtPdf}" height="500px" width="100%" rendered="#{not(customerDetailController.stmtPdf eq '0')}"  />     


            </h:panelGroup>
            <f:facet name="footer" >
                <h:form>
                    <bnu:button look="success" value="#{messages.lblClose}"  onclick="$('.printeModal').modal('hide');" />
                    
                </h:form>
            </f:facet>
        </bnu:modal> 




                <h:outputScript>


                    var customerFormHelper = {
                    shippingDir : 1,
                    displayName: function(){
                    var title = $(".title").val() + ' ';
                    var fname = $(".fname").val() + ' ';
                    var mname = $(".mname").val() + ' ';
                    var lname = $(".lname").val() + ' ';
                    var suffix = $(".suffix").val();
                    $(".displayName").val(title + fname +mname + lname + suffix);
                    },
                    enableShipAdress: function (){
                    if(this.shippingDir == 1){
                    $(".shippingEnable").removeAttr('disabled');

                    this.shippingDir = 2;
                    }else{
                    $(".shippingEnable").attr('disabled',true);
                    $(".shippingEnable").val("");
                    this.shippingDir = 1;
                    }
                    }
                    };


                    $(document).ready(function(){
                    $(".shippingEnable").attr('disabled',true);

                    });


                    function show(value){

                    if(value == "PE"){
                    $(".updateEstimateStatus").hide();
                    //alert(value);
                    }else{
                    $(".updateEstimateStatus").show();
                    //alert(value);
                    }
                    }

                </h:outputScript>

                <h:outputStylesheet>
                    /* Dropdown Button */
                    .dropbtn {
                    background-color: #3498DB;
                    color: white;
                    padding: 16px;
                    font-size: 16px;
                    border: none;
                    cursor: pointer;
                    }

                    .dropbtn:hover, .dropbtn:focus {
                    background-color: #2980B9;
                    }


                    .dropdown {
                    position: relative;
                    display: inline-block;
                    }

                    .dropdown-content {
                    display: none;
                    position: absolute;
                    background-color: #f1f1f1;
                    min-width: 200px;
                    overflow: auto;
                    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
                    z-index: 1;
                    padding: 10px;
                    border: 1px solid #ddd;
                    }


                    .dropdown-content span {
                    color: black;
                    padding: 12px 16px;
                    text-decoration: none;
                    display: block;
                    }

                    .dropdown-content span:hover {background-color: #ddd}

                    .show {display:block;}

                </h:outputStylesheet>

                <h:outputScript>

                    $( document ).ready(function() {
                    var w = $( document ).width();

                    if(w &lt;= 768){

                    $('.dropdown-content').css('min-width','200px');
                    }






                    });





                    function myFunction() {
                    $(".dropdown-content").show();
                    };

                    $(document).on("click",function(event) {

                    var str = $(event.target).parent().parent().parent().attr('class')+' '+$(event.target).parent().parent().attr('class')+' '+$(event.target).parent().attr('class') + ' ' + $(event.target).attr('class');
                    //alert(str.indexOf("dropLi")>=0);
                    if(str.indexOf("dropLi")>=0){


                    }else{
                    //alert(str);
                    $(".dropdown-content").hide();
                    }



                    });








                    var filterHelper = {
                    fecha: new Date(),
                    changeDate: function(e){

                    switch(e){
                    case "L3":
                    var newdate = new Date(this.fecha);
                    newdate.setDate(newdate.getDate() - 365); // minus the date
                    var nd = new Date(newdate);
                    $('.ffrom').val(this.formatDate(nd));
                    $('.fto').val(this.formatDate(this.fecha));
                    break;
                    case "CU":

                    break;
                    case "TO":
                    $('.ffrom').val(this.formatDate(this.fecha));
                    $('.fto').val(this.formatDate(this.fecha));
                    break;
                    case "YE":
                    var newdate = new Date(this.fecha);
                    newdate.setDate(newdate.getDate() - 1); // minus the date
                    var nd = new Date(newdate);
                    $('.ffrom').val(this.formatDate(nd));
                    $('.fto').val(this.formatDate(this.fecha));
                    break;
                    case "TW":
                    var first = this.fecha.getDate() - this.fecha.getDay();
                    var last = first + 6;
                    var curr =  new Date();
                    var firstday = new Date(curr.setDate(first));
                    var lastday = new Date(curr.setDate(last));
                    $('.ffrom').val(this.formatDate(firstday));
                    $('.fto').val(this.formatDate(lastday));
                    break;
                    case "TM":
                    var date = new Date(), y = date.getFullYear(), m = date.getMonth();
                    var firstDay = new Date(y, m, 1);
                    var lastDay = new Date(y, m + 1, 0);
                    $('.ffrom').val(this.formatDate(firstDay));
                    $('.fto').val(this.formatDate(lastDay));
                    break;
                    case "TQ":
                    var now = new Date();
                    var quarter = Math.floor((now.getMonth() / 3));
                    var firstDate = new Date(now.getFullYear(), quarter * 3, 1);
                    var endDate = new Date(firstDate.getFullYear(), firstDate.getMonth() + 3, 0);
                    $('.ffrom').val(this.formatDate(firstDate));
                    $('.fto').val(this.formatDate(endDate));
                    break;
                    case "TY":

                    $('.ffrom').val(this.formatDate(new Date(new Date().getFullYear(), 0, 1)));
                    $('.fto').val(this.formatDate(new Date(new Date().getFullYear(), 11, 31)));
                    break;
                    case "LW":
                    var first = this.fecha.getDate() - this.fecha.getDay() - 7;
                    var last = first + 6;
                    var curr =  new Date();
                    var firstday = new Date(curr.setDate(first));
                    var lastday = new Date(curr.setDate(last));
                    $('.ffrom').val(this.formatDate(firstday));
                    $('.fto').val(this.formatDate(lastday));

                    break;
                    case "LM":
                    var date = new Date(), y = date.getFullYear(), m = date.getMonth() -1;
                    var firstDay = new Date(y, m, 1);
                    var lastDay = new Date(y, m + 1, 0);
                    $('.ffrom').val(this.formatDate(firstDay));
                    $('.fto').val(this.formatDate(lastDay));

                    break;
                    case "LQ":
                    var now = new Date();
                    var quarter = Math.floor((now.getMonth() / 3));
                    var firstDate = new Date(now.getFullYear(), quarter * 3 - 3, 1);
                    var endDate = new Date(firstDate.getFullYear(), firstDate.getMonth() + 3, 0);
                    $('.ffrom').val(this.formatDate(firstDate));
                    $('.fto').val(this.formatDate(endDate));

                    break;
                    case "LY":
                    $('.ffrom').val(this.formatDate(new Date(new Date().getFullYear()-1, 0, 1)));
                    $('.fto').val(this.formatDate(new Date(new Date().getFullYear()-1, 11, 31)));
                    break;
                    case "AD":
                    $('.ffrom').val('');
                    $('.fto').val('');
                    break;
                    default:
                    $('.ffrom').val('');
                    $('.fto').val('');
                    break;

                    }

                    },
                    formatDate: function(e){
                    var month = e.getMonth()+1;
                    var day = e.getDate();
                    if(month &lt; 10){
                    month = '0' + month;
                    }
                    if(day &lt; 10){
                    day = '0' + day;
                    }
                    return month + '/'+day+'/'+e.getFullYear();

                    },
                    changeType: function(e){
                    switch(e){
                    case "0":
                    $('.hideStZone').show();
                    $(".statuses option").remove();
                    $('.statuses').append('<option data-label="#{messages.lblAllStatuses}" value="0">#{messages.lblAllStatuses}</option>');
                    $('.statuses').append('<option data-label="#{messages.lblInvoiceStatusOpen}" value="OP">#{messages.lblInvoiceStatusOpen}</option>');
                    $('.statuses').append('<option data-label="#{messages.lblInvoiceStatusOverdue}" value="OV">#{messages.lblInvoiceStatusOverdue}</option>');
                    $('.statuses').append('<option data-label="#{messages.lblPaid}" value="PD">#{messages.lblPaid}</option>');
                    $('.statuses').append('<option data-label="#{messages.lblInvoiceStatusPartial}" value="PA">#{messages.lblInvoiceStatusPartial}</option>');
                    $('.statuses').append('<option data-label="#{messages.lblESPending}" value="PE">#{messages.lblESPending}</option>');
                    $('.statuses').append('<option data-label="#{messages.lblAccepted }" value="AC">#{messages.lblAccepted }</option>');
                    $('.statuses').append('<option data-label="#{messages.lblRejected}" value="RJ">#{messages.lblRejected}</option>');
                    $('.statuses').append('<option data-label="#{messages.lblInvoiceStatusClosed}" value="CL">#{messages.lblInvoiceStatusClosed}</option>');
                    $('.statuses').append('<option data-label="#{messages.lblUnapplied}" value="UN">#{messages.lblUnapplied}</option>');
                    break;
                    case "ES":
                    $('.hideStZone').show();
                    $(".statuses option").remove();
                    $('.statuses').append('<option data-label="#{messages.lblAllStatuses}" value="0">#{messages.lblAllStatuses}</option>');
                    $('.statuses').append('<option data-label="#{messages.lblESPending}" value="PE">#{messages.lblESPending}</option>');
                    $('.statuses').append('<option data-label="#{messages.lblAccepted }" value="AC">#{messages.lblAccepted }</option>');
                    $('.statuses').append('<option data-label="#{messages.lblRejected}" value="RJ">#{messages.lblRejected}</option>');
                    $('.statuses').append('<option data-label="#{messages.lblInvoiceStatusClosed}" value="CL">#{messages.lblInvoiceStatusClosed}</option>');
                    break;
                    case "IN":
                    $('.hideStZone').show();
                    $(".statuses option").remove();
                    $('.statuses').append('<option data-label="#{messages.lblAllStatuses}" value="0">#{messages.lblAllStatuses}</option>');
                    $('.statuses').append('<option data-label="#{messages.lblInvoiceStatusOpen}" value="OP">#{messages.lblInvoiceStatusOpen}</option>');
                    $('.statuses').append('<option data-label="#{messages.lblInvoiceStatusOverdue}" value="OV">#{messages.lblInvoiceStatusOverdue}</option>');
                    $('.statuses').append('<option data-label="#{messages.lblInvoiceStatusPartial}" value="PA">#{messages.lblInvoiceStatusPartial}</option>');
                    $('.statuses').append('<option data-label="#{messages.lblPaid}" value="PD">#{messages.lblPaid}</option>');
                    break;
                    case "SR":
                    $('.hideStZone').show();
                    $(".statuses option").remove();
                    $('.statuses').append('<option data-label="#{messages.lblAllStatuses}" value="0">#{messages.lblAllStatuses}</option>');
                    break;
                    case "PA":
                    $('.hideStZone').show();
                    $(".statuses option").remove();
                    $('.statuses').append('<option data-label="#{messages.lblAllStatuses}" value="0">#{messages.lblAllStatuses}</option>');
                    $('.statuses').append('<option data-label="#{messages.lblInvoiceStatusClosed}" value="CL">#{messages.lblInvoiceStatusClosed}</option>');
                    $('.statuses').append('<option data-label="#{messages.lblInvoiceStatusPartial}" value="PA">#{messages.lblInvoiceStatusPartial}</option>');
                    $('.statuses').append('<option data-label="#{messages.lblUnapplied}" value="UN">#{messages.lblUnapplied}</option>');
                    break;
                    case "ST":
                    $(".statuses option").remove();
                    $('.statuses').append('<option data-label="#{messages.lblAllStatuses}" value="0">#{messages.lblAllStatuses}</option>');
                    $('.hideStZone').hide();
                    break;
                    default:
                    console.log('Opcion sin soporte');
                    break;
                    }


                    },
                    changeStatus: function(e){
                    if($('.comboType').val() == '0'){
                    switch(e){
                    case "0":
                    console.log(e);
                    break;
                    case "OP":
                    console.log(e);
                    $('.comboType').val('IN');
                    this.changeType('IN');
                    $('.statuses').val(e);
                    break;
                    case "OV":
                    console.log(e);
                    $('.comboType').val('IN');
                    this.changeType('IN');
                    $('.statuses').val(e);
                    break;
                    case "PD":
                    console.log(e);
                    $('.comboType').val('IN');
                    this.changeType('IN');
                    $('.statuses').val(e);
                    break;
                    case "PA":
                    console.log(e);
                    $('.comboType').val('IN');
                    this.changeType('IN');
                    $('.statuses').val(e);
                    break;
                    case "PE":
                    console.log(e);
                    $('.comboType').val('ES');
                    this.changeType('ES');
                    $('.statuses').val(e);
                    break;
                    case "AC":
                    console.log(e);
                    $('.comboType').val('ES');
                    this.changeType('ES');
                    $('.statuses').val(e);
                    break;
                    case "RJ":
                    console.log(e);
                    $('.comboType').val('ES');
                    this.changeType('ES');
                    $('.statuses').val(e);
                    break;
                    case "CL":
                    console.log(e);
                    $('.comboType').val('PA');
                    this.changeType('PA');
                    $('.statuses').val(e);
                    break;
                    case "UN":
                    console.log(e);
                    $('.comboType').val('PA');
                    this.changeType('PA');
                    $('.statuses').val(e);
                    break;
                    default:
                    console.log('Not Supported');
                    break;
                    }
                    }



                    }

                    };


                </h:outputScript>


            </ui:define>
        </ui:composition>
    </h:body>
</html>

