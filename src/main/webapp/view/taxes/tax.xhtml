<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:bnu="http://bootsfaces.net/ui">

    <f:view locale="#{ userData.locale}"/>

    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>


        <ui:composition template="../../template/template.xhtml">

            <ui:define name="content">
                #{taxController.init()}
                <h:form id="tableForm"> 
                    <bnu:button onclick="$('.modalPseudoClass').modal()"  value="#{messages.btnAddTax}" look="success" style="float: right"></bnu:button>
                    <bnu:dropButton  value="#{messages.btnEditIVA}" look="success" style="float: right; padding-right:5px">
                        <bnu:navLink value="#{messages.eSettings}" href="#"></bnu:navLink>
                        <bnu:navLink value="#{messages.eRates}" href="#"></bnu:navLink>
                    </bnu:dropButton>
                    <div class="row" style="background-color: #f5f5f5; display: block; width: 100%;
                         padding: 0; margin: 0;">
                        <h1 style="padding-left: 2%">#{messages.tax}</h1> 

                    </div>
                    <bnu:row>
                        <bnu:column span="12">
                            <bnu:messages id="msg"/>
                        </bnu:column>
                    </bnu:row>
                    <p:separator/>

                    <bnu:dropButton  value="#{messages.btnViewReports}" style="float: right; padding-right: 12%">
                        <bnu:navLink value="#{messages.btnListVR1}" href="#"></bnu:navLink>
                        <bnu:navLink value="#{messages.btnListVR2}" href="#"></bnu:navLink>
                        <bnu:navLink value="#{messages.btnListVR3}" href="#"></bnu:navLink>
                    </bnu:dropButton>

                    <!-- BNU TAB VIEW RETURNS -->
                    <bnu:tabView activeIndex="2">
                        <bnu:tab title="#{messages.returns}">
                            <br></br><br></br>
                            <bnu:dropButton  value="#{messages.allRet}" style="float: left">
                                <bnu:navLink value="#{messages.allRet}" href="#"></bnu:navLink>
                                <bnu:navLink value="#{messages.open}" href="#"></bnu:navLink>
                                <bnu:navLink value="#{messages.filed}" href="#"></bnu:navLink>
                                <bnu:navLink value="#{messages.filedANDpaid}" href="#"></bnu:navLink>

                            </bnu:dropButton>

                            <bnu:commandButton value="" iconAwesome="fa-cogs"  style="float: right" />

                            <br></br><br></br><br></br><br></br>                     

                            <bnu:dataTable style="max-width: 100%">
                                <h:column >
                                    <f:facet name="header">
                                        <h:outputText value="#{messages.sDate}" />
                                    </f:facet>
                                    <h:outputText value="" />
                                </h:column>
                                <h:column >
                                    <f:facet name="header">
                                        <h:outputText value="#{messages.eDate}" />
                                    </f:facet>
                                    <h:outputText value="" />
                                </h:column>
                                <h:column >
                                    <f:facet name="header">
                                        <h:outputText value="#{messages.fDate}" />
                                    </f:facet>
                                    <h:outputText value="" />
                                </h:column>
                                <h:column >
                                    <f:facet name="header">
                                        <h:outputText value="#{messages.aDue}" />
                                    </f:facet>
                                    <h:outputText value="" />
                                </h:column>
                                <h:column >
                                    <f:facet name="header">
                                        <h:outputText value="#{messages.paymentsC}" />
                                    </f:facet>
                                    <h:outputText value="" />
                                </h:column>
                                <h:column >
                                    <f:facet name="header">
                                        <h:outputText value="#{messages.balance}" />
                                    </f:facet>
                                    <h:outputText value="" />
                                </h:column>
                                <h:column >
                                    <f:facet name="header">
                                        <h:outputText value="#{messages.status}" />
                                    </f:facet>
                                    <h:outputText value="" />
                                </h:column>
                                <h:column >
                                    <f:facet name="header">
                                        <h:outputText value="#{messages.action}" />
                                    </f:facet>
                                    <h:outputText value="" />
                                </h:column>

                            </bnu:dataTable>

                        </bnu:tab>
                        <!--FINISH FIRST TAB VIEW -->

                        <!--BNU TAB PAYMENTS -->
                        <bnu:tab title="#{messages.paymentsT}">
                            <br></br>
                            <bnu:button value="#{messages.btnRecordPay}" style="float: right"></bnu:button>
                            <br></br><br></br>
                            <bnu:commandButton value="" iconAwesome="fa-cogs"  style="float: right" />
                            <bnu:dropMenu value="" iconAwesome="fa-filter">
                                <div>
                                    <section>
                                        <div class="row">
                                            <div class="col-xs-4">
                                                <h:outputLabel value="Tax Period" ></h:outputLabel>
                                                <bnu:inputText></bnu:inputText>
                                            </div>
                                            <div class="col-md-4">
                                                <div>
                                                    <h:outputLabel value="From"></h:outputLabel>
                                                    <bnu:inputText></bnu:inputText>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div>
                                                    <h:outputLabel value="to"></h:outputLabel>
                                                    <bnu:inputText></bnu:inputText>
                                                </div>
                                            </div>

                                        </div>
                                    </section>
                                </div> 
                            </bnu:dropMenu>


                            <h:dataTable  styleClass="table table-striped" rows="3"  
                                          var="dtosTable" value="" >
                                <h:column >
                                    <f:facet name="header">
                                        <h:outputText value="#{messages.date}" />
                                    </f:facet>
                                    <h:outputText value="" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="#{messages.type}" />
                                    </f:facet>
                                    <h:outputText value="" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="#{messages.taxPeriod}" />
                                    </f:facet>
                                    <h:outputText value="" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="#{messages.amount}" />
                                    </f:facet>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="#{messages.memo}" />
                                    </f:facet>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="#{messages.action}" />
                                    </f:facet>
                                </h:column>
                            </h:dataTable>
                        </bnu:tab>
                        <!-- FINISH PAYMENTS TAB VIEW -->

                        <!-- TAX TAB VIEW -->
                        <bnu:tab title="#{messages.tittleTax}">
                            <br></br><br></br>
                            <bnu:dataTable  styleClass="table table-striped" 
                                            var="taxL" value="#{taxController.taxList}" >
                                <bnu:dataTableColumn label="#{messages.nameTax}" value="#{taxL.name}"></bnu:dataTableColumn>
                                <bnu:dataTableColumn label="#{messages.rate}" value="#{taxL.rate}"></bnu:dataTableColumn>
                                <bnu:dataTableColumn label="#{messages.Tcampo4}">
                                    <bnu:dropButton value="#{messages.edit}" look="primary" >
                                        <bnu:commandButton value="#{messages.edit}" action="#{taxController.action(taxL, 'U')}" style="width:100%" />
                                        <bnu:commandButton value="#{messages.delete}" action="#{taxController.action(taxL, 'D')}" style="width:100%" />
                                    </bnu:dropButton>
                                </bnu:dataTableColumn>
                            </bnu:dataTable>
                        </bnu:tab>
                    </bnu:tabView>
                </h:form>

                <!-- Modal add new tax-->
                <bnu:modal id="amodal"   styleClass="modalPseudoClass" backdrop="false" closeOnEscape="false" 
                           closable="false">
                    <h:form id="prodForm">
                        <h:panelGroup id="modalContent">
                            <h3>#{taxController.modalTitle}</h3>
                            <p:separator/>
                            <h5>What type of tax do you want to add?</h5>
                            <ui:fragment rendered="#{!taxController.showForm}">
                                <bnu:panel styleClass="typeOp"  onclick="ajax:taxController.selectType('TX');">
                                    <bnu:row>
                                        <bnu:column tiny-screen="9" small-screen="10" medium-screen="10" large-screen="10">
                                            <p><strong>Tax Rate</strong></p>
                                            <p>Add another tax rate for IVA, such as a local tax not already included.</p>
                                        </bnu:column>
                                    </bnu:row>
                                </bnu:panel>
                                <!-- <p:separator/>
                                 
                                 <bnu:panel styleClass="typeOp" >
                                     <bnu:row>
                                         <bnu:column tiny-screen="9" small-screen="10" medium-screen="10" large-screen="10">
                                             <p><strong>Group rate</strong></p>
                                             <p>Combine multiple taxes and make applying them to your transactions easier. All taxes you include are calculated and charged at once, but we track them separately for you.</p>
                                         </bnu:column>
                                     </bnu:row>   
                                 </bnu:panel>
                                 <p:separator/>
                                 <bnu:panel styleClass="typeOp" >
                                     <bnu:row>
                                         <bnu:column tiny-screen="9" small-screen="10" medium-screen="10" large-screen="10">
                                             <p><strong>Custom tax</strong></p>
                                             <p>Services that you provide to customers, for example, landscaping or tax preparation services.</p>
                                         </bnu:column>
                                     </bnu:row>
                                 </bnu:panel>
                                 <bnu:row>
 
                                     <bnu:column span="6">
                                         <bnu:button value="Close" look="danger" onclick="$('.modalPseudoClass').modal('hide')" size="md"/>
                                     </bnu:column>
 
                                 </bnu:row>  -->
                            </ui:fragment>

                            <ui:fragment rendered="#{taxController.showForm}">
                                <bnu:row  >
                                    <bnu:column tiny-screen="12" small-screen="12" medium-screen="8" large-screen="8">
                                        <bnu:inputText label="Tax name" maxlength="40" label-style="color:black;" value="#{taxController.tx.name}" />
                                        <bnu:inputText label="Description" maxlength="40" label-style="color:black;" value="#{taxController.tx.descrip}" />
                                        <bnu:inputText label="Rate %" maxlength="2" label-style="color:black;" onkeyup="soloNumeros(this)" value="#{taxController.tx.rate}" />
                                    </bnu:column>

                                </bnu:row>
                                <bnu:row>
                                    <bnu:column span="12">
                                        <bnu:messages id="msg"/>
                                    </bnu:column>
                                </bnu:row>
                                <bnu:row>
                                    <bnu:column span="6">
                                        <bnu:commandButton value="#{messages.save}" style="width: 100%" look="success" 
                                                           action="#{taxController.addNewTax()}" update="@form"
                                                           rendered="#{!productController.bundle}"
                                                           />
                                    </bnu:column>
                                    <bnu:column span="6">
                                        <bnu:commandButton value="#{messages.lblClose}" look="danger" action="#{taxController.limpiar()}" style="width: 100%"/>
                                    </bnu:column>

                                </bnu:row>
                                <p:separator/>
                            </ui:fragment>
                        </h:panelGroup>
                    </h:form>
                </bnu:modal>

                <!--edit modal -->
                <bnu:modal  id="bmodal" title="#{messages.taxInfo}" styleClass="modalPseudoClass2" backdrop="false" >
                    <h:form id="editForm">
                        <bnu:row>
                            <bnu:column tiny-screen="12" small-screen="12" medium-screen="8" large-screen="8">
                                <bnu:inputText label="Tax name" maxlength="40" label-style="color:black;" value="#{taxController.tax.name}" />
                                <bnu:inputText label="Rate %" maxlength="2" label-style="color:black;" onkeyup="soloNumeros(this)" value="#{taxController.tax.rate}" />
                            </bnu:column>
                        </bnu:row>

                        <bnu:commandButton value="#{messages.save}" look="success" action="#{taxController.editTax()}"  />

                    </h:form>
                </bnu:modal>

                <!-- delete tax -->
                <bnu:modal id="cmodal"  styleClass="modalPseudoClass3" backdrop="false" closable="false" closeOnEscape="false"  >
                    <h:form id="deleteForm">
                        <p>#{messages.deleteTax}</p>
                        <bnu:commandButton value="#{messages.yes}" look="success" action="#{taxController.deleteTax()}"  />
                        <bnu:button value="#{messages.No}" dismiss="modal" look="danger" />
                    </h:form>
                </bnu:modal>


                        <!--Funcion para validar solo numeros campo rate -->
                        <h:outputScript>
                            function soloNumeros(obj) 
                            { 
                            obj.value = (obj.value + '').replace(/[^0-9]/g, '');
                            }
                            //$.blockUI({ message: 'Hold on!' });      
                            function mensaje(e){
                            alert(e);
                            } 
                        </h:outputScript>
                        </ui:define>
                        </ui:composition>
                        </h:body>
                        </html>

